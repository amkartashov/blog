<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Pulumi for Terraform users - Blog</title>
<meta name="description" content="This article is intended for engineers familiar with IaC, modern IaC tools, and related terminology. As title suggests, it might be interesting for Terraform users - I’ll try to compare Terraform and Pulumi. The article is based on personal experience and may appear opinionated.">


  <meta name="author" content="Andrey Kartashov">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Blog">
<meta property="og:title" content="Pulumi for Terraform users">
<meta property="og:url" content="https://blog.gorilych.ru/pulumi-for-tf-users/">


  <meta property="og:description" content="This article is intended for engineers familiar with IaC, modern IaC tools, and related terminology. As title suggests, it might be interesting for Terraform users - I’ll try to compare Terraform and Pulumi. The article is based on personal experience and may appear opinionated.">







  <meta property="article:published_time" content="2020-07-25T17:52:28+00:00">





  

  


<link rel="canonical" href="https://blog.gorilych.ru/pulumi-for-tf-users/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Andrey Kartashov",
      "url": "https://blog.gorilych.ru/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Blog Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/posts/">Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Andrey Kartashov</h3>
    
    
      <div class="author__bio" itemprop="description">
        

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      
        
          
        
          
        
          
        
          
        
          
            <li><a href="https://github.com/gorilych" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/amkartashov/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
        
      

      

      
        <li>
          <a href="mailto:gorilych@gmail.com">
            <meta itemprop="email" content="gorilych@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Pulumi for Terraform users">
    <meta itemprop="description" content="This article is intended for engineers familiar with IaC, modern IaC tools, and related terminology. As title suggests, it might be interesting for Terraform users - I’ll try to compare Terraform and Pulumi. The article is based on personal experience and may appear opinionated.">
    <meta itemprop="datePublished" content="2020-07-25T17:52:28+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Pulumi for Terraform users
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>This article is intended for engineers familiar with IaC, modern IaC tools, and related terminology. As title suggests, it might be interesting for Terraform users - I’ll try to compare Terraform and Pulumi. The article is based on personal experience and may appear opinionated.</p>

<h1 id="iac-approach">IaC approach</h1>

<figure>
  <img src="https://blog.gorilych.ru/assets/pulumi-for-tf-users/iac.svg" alt="" object-fit="cover" />
  <figcaption>IaC workflow</figcaption>
</figure>

<p>I am sure Terraform users have correct understanding of what IaC is and is not, but for the sake of article consistency, let me repeat it here.</p>

<p>Infrastructure as Code aims to provide a reliable, repeatable, and automatic way to create, adjust, or destroy infrastructure components or resources. Usually these are networking, compute, or storage resources in public clouds like AWS.</p>

<p>The major concept and the main difference with manual administration is that you describe infrastructure in a declarative way. <strong>Code</strong> part means that this description is machine-readable and a machine executes the code to operate infrastructure.</p>

<p>Another pillar in IaC is a concept of <strong>State</strong>  - description of operated resources with their actual conditions and characteristics. A state can be either stored somewhere or calculated each time (in ansible, f.e.). IaC requires state in its workflow because it should work with the same set of resources during infrastructure lifetime.</p>

<p>Usually we use <strong>specific tool for IaC</strong> (CloudFormation, Terraform, Pulumi, Ansible, etc). I would say it’s another concept behind IaC, implicit though. Of course, you can also manage resources programmatically with cloud API using regular scripts. But with these requirements of having state and describe infrastructure declaratively you’ll end up with writing your own IaC tool.</p>

<p>In short, IaC workflow is to write some code and use specific IaC tool to execute it, producing state and cloud resources as a result.</p>

<h1 id="what-is-pulumi">What is Pulumi</h1>

<p><a href="https://www.pulumi.com/docs/">Pulumi</a> is a modern IaC tool that essentially differs from others by allowing the use of real programming languages. This doesn’t mean it uses an imperative approach though because a code describes a desired state and not API calls or procedures to perform.</p>

<p>Currently supported <a href="https://www.pulumi.com/docs/intro/languages/">language runtimes</a> are Node.js, Python, .NET Core, and Go.</p>

<p>Let’s outline the main terms of Pulumi’s architecture (described in greater detail in <a href="https://www.pulumi.com/docs/intro/concepts/">Architecture &amp; Concepts</a>).</p>

<ul>
  <li><a href="https://www.pulumi.com/docs/intro/concepts/project/">Project</a> - the code itself which describes cloud resources - directory containing collection of program files (<code class="language-plaintext highlighter-rouge">*.go</code>, <code class="language-plaintext highlighter-rouge">*.ts</code> etc) and a metadata file <code class="language-plaintext highlighter-rouge">Pulumi.yaml</code></li>
  <li><a href="https://www.pulumi.com/docs/intro/concepts/stack/">Stack</a> - instance of a <em>Project</em>, collection of cloud resources deployed with particular <em>Configuration</em> (see below). F.e., you may have separate stacks for production and staging environments.</li>
  <li><em>Stack</em> <a href="https://www.pulumi.com/docs/intro/concepts/config/">Configuration</a> - YAML file with a set of values which are used to modify operation flow. This adds flexibility so you can re-use the same <em>Project</em> for environments with distinct DNS names, different compute power and storage capacity and so on. Configuration file is named after a <em>Stack</em> as <code class="language-plaintext highlighter-rouge">Pulumi.&lt;stack-name&gt;.yaml</code>.</li>
  <li><em>Stack</em> <a href="https://www.pulumi.com/docs/intro/concepts/state/">State</a> - state of cloud resources in a <em>Stack</em>.</li>
  <li><em>Stack</em> <a href="https://www.pulumi.com/docs/intro/concepts/programming-model/#stack-outputs">Output</a> - calculated values which are known after deployment, f.e. EC2 instance id, generated password for RDS, etc</li>
</ul>

<p>These terms are close but not always interchangeable with Terraform ones. Pulumi’s project is close to Terraform’s root module. Terraform’s workspace is a close concept for Pulumi’s stack. Output and configuration can be considered the same.</p>

<p>Likewise in Terraform, there is a specific binary <code class="language-plaintext highlighter-rouge">pulumi</code> to execute Pulumi programs. <code class="language-plaintext highlighter-rouge">pulumi</code> is used to operate state backends (a place where state files are stored) and stacks.</p>

<h1 id="how-pulumi-works">How Pulumi works</h1>

<p>When you run a pulumi program it is executed with <code class="language-plaintext highlighter-rouge">pulumi</code> binary. Pulumi engine computes a desired state from resources registered by the program and then creates, updates, or deletes resources as needed.</p>

<p>Pulumi consists of a language host that is responsible for executing the code and deployment engine which is responsible for interacting with cloud API.</p>

<p>For the greater details refer to these articles:</p>
<ul>
  <li><a href="https://www.pulumi.com/docs/intro/concepts/how-pulumi-works/">https://www.pulumi.com/docs/intro/concepts/how-pulumi-works/</a></li>
  <li><a href="https://www.pulumi.com/docs/intro/concepts/programming-model/">https://www.pulumi.com/docs/intro/concepts/programming-model/</a></li>
</ul>

<h1 id="programming-model">Programming model</h1>
<h1 id="code-example">Code example</h1>
<h1 id="code-reuse">Code reuse</h1>
<h1 id="cli-usage">CLI usage</h1>
<h1 id="pulumi-vs-terraform">Pulumi vs Terraform</h1>
<h1 id="conclusion">Conclusion</h1>
<h1 id="references">References</h1>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#pulumi" class="page__taxonomy-item" rel="tag">pulumi</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#terraform" class="page__taxonomy-item" rel="tag">terraform</a>
    
    </span>
  </p>




        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-07-25T17:52:28+00:00">July 25, 2020</time></p>


      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Pulumi+for+Terraform+users%20https%3A%2F%2Fblog.gorilych.ru%2Fpulumi-for-tf-users%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.gorilych.ru%2Fpulumi-for-tf-users%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fblog.gorilych.ru%2Fpulumi-for-tf-users%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/jekyll/update/welcome-to-jekyll/" class="pagination--pager" title="Welcome to Jekyll!
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/jekyll/update/welcome-to-jekyll/" rel="permalink">Welcome to Jekyll!
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">You’ll find this post in your _posts directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different wa...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
          <li><a href="https://github.com/gorilych" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/amkartashov/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Andrey Kartashov. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=1134063653625013";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
  





  </body>
</html>
